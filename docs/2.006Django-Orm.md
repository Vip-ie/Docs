# 6.ORM
## 1.基础
### ORM
* Django的ORM简介
* 数据库连接配置
* 模型的创建与映射
* 数据的增删改查
-----------------------------------------------------------
#### ORM系统分析
* ORM概念:对象关系映射(Object Relational Mapping,简称ORM)
* ORM的优势:不用直接编写SQL代码，只需像操作对象一样从数据库操作数据
-----------------------------------------------------------
#### 模型映射关系
* 模型类必须都写在app下的models.py文件中。
* 模型如果需要映射到数据库,所在的app必须被安装。
* 一个数据表对应一个模型类,表中的字段,对应模型中的类属性。
-----------------------------------------------------------
#### 数据库的配置
在settings.py中配置DATABASES
```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql', # 数据库引擎
        'NAME': 'mydb', # 数据库名称
        'USER': 'admin', # 链接数据库的用户名
        'PASSWORD': 'Root110qwe', # 链接数据库的密码
        'HOST': '127.0.0.1', # mysql服务器的域名和ip地址
        'PORT': '3306', # mysql的一个端口号,默认是3306
        }
    }
```
1.数据库驱动安装

在虚拟环境中安装`pymysqlpip install pymysql`

在虚拟环境中安装`Pillow pip install Pillow`

2.设置连接器为pymysql

在主目录下的的__init__.py文件添加下面两句
```
import pymysql
pymysql.install_as_MySQLdb()
```

3.使用Django中的数据模型

在app下面的models.py中创建django模型类
```
from django.db import models #引入Django的数据模型

class User(models.Model):
        id = models.AutoField(primary_key=True) #主键可以省略，django会自动给我们加上
        name =models.CharField(max_length=30) #字符长度，默认必须写长度
        age = models.IntegerField() #IntegerFiled 整型

        #格式化输出
        def __str__(self):
        return 'Department<id=%s,name=%s,age=%s>'%(self.id,self.name，self.age)
```


4.将模型类映射到数据库
* 执行`python manage.py makemigrations`该命令，创建映射数据库文件。
* 执行`python manage.py migrate <appname>`该命令，提交到数据库。

## 2.增删改查
## 3.聚合查询